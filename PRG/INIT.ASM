; Initialisation de la SNES

RESET:
	SEI
	CLC
	XCE
	REP #%00110000
	LDA #$1FFF
	TCS
	LDA #$0000
	TCD
	SEP #%00100000
	PHA
	PLB
INIT:
	SEP #%00110000
	LDA #$80
	STA INIDISP ; Désactiver le rendu d'image
	LDA #%00000010
	STA OBJSEL
	STZ OAM_ADDRESS_LOW
	STZ OAM_ADDRESS_HIGH ; Remise à zéro du pointeur d'adresse de l'OAM
	LDA #7
	STA BG_MODE ; Mode 7
	STZ MOSAIC
	LDA #%01000100
	STA BG1SC
	STZ BG2SC
	STZ BG3SC
	STZ BG4SC
	LDA #%00000100
	STA BG12NBA
	STZ BG34NBA
	STZ BG1HOFS
	STZ BG1HOFS
	LDA #$FF
	STA BG1VOFS
	STA BG2VOFS
	STA BG3VOFS
	STA BG4VOFS
	LDA #$FF
	STA BG1VOFS
	STA BG2VOFS
	STA BG3VOFS
	STA BG4VOFS ; L'affichage vertical est décalé d'un pixel
	STZ BG2HOFS
	STZ BG2HOFS
	STZ BG3HOFS
	STZ BG3HOFS
	STZ BG4HOFS
	STZ BG4HOFS
	LDA #$80
	STA VMAINC
	STZ VMADDL
	STZ VMADDH
	STA M7SEL
	STZ M7A
	LDA #$01
	STA M7A ; A = 1.00
	STZ M7B
	STZ M7B ; B = 0.00
	STZ M7C
	STZ M7C ; C = 0.00
	STZ M7D
	STA M7D ; D = 1.00
	STZ M7X
	STZ M7X ; X = 0.00
	STZ M7Y
	STZ M7Y ; Y = 0.00
	STZ CGRAM_ADDRESS ; Remise à zéro du pointeur d'adresse de la CGRAM
	STZ W12SEL
	STZ W34SEL
	STZ WOBJSEL
	STZ WIN1_LEFT_POS
	STZ WIN1_RIGHT_POS
	STZ WIN2_LEFT_POS
	STZ WIN2_RIGHT_POS
	STZ WBGLOG
	STZ WOBJLOG
	LDA #%10001
	STA TM
	STZ TS
	STZ TMW
	STZ TSW
	LDA #$30
	STA CGSWSEL
	STZ CGADSUB
	LDA #$E0
	STA COLDATA
	STZ INISET
	STZ NMITIMEN
	LDA #$FF
	STA WRIO
	STZ HTIMEL
	STZ HTIMEH
	STZ VTIMEL
	STZ VTIMEH
	STZ DMA_ENABLE
	STZ HDMA_ENABLE
	STZ MEMSEL
Clean_WRAM:
	LDX #$20
	LDA #0
	STZ WRAMADDL
	STZ WRAMADDM
	STZ WRAMADDH
-	STZ WRAMDATA
	DEA
	BNE -
	DEX
	BNE -
Clean_VRAM:
	LDA #0
	LDX #$80
-	STZ VMDATALW
	STZ VMDATAHW
	DEA
	BNE -
	DEX
	BNE -
Clean_CGRAM:
	LDA #0
-	STZ CGRAM_DATAW
	STZ CGRAM_DATAW
	DEA
	BNE -
Clean_OAM:
	LDA #$10
	LDX #1
-	STZ OAM_DATA_WORD
	STZ OAM_DATA_WORD
	DEA
	BNE -
	DEX
	BEQ -
	STZ OAM_ADDRESS_LOW
	STZ OAM_ADDRESS_HIGH
	CLI
	JMP START